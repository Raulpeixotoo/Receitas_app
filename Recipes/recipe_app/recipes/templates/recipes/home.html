{% extends 'recipes/base.html' %}

{% block content %}
<h1>Feed de Receitas</h1>

{% if user.is_authenticated %}
    <p>Bem-vindo, {{ user.username }}!</p>
    
{% else %}
    <p>Voc√™ n√£o est√° logado. <a href="{% url 'login' %}">Fa√ßa login</a> ou <a href="{% url 'register' %}">registre-se</a>.</p>
{% endif %}

<!-- Feed de Receitas -->
<div class="recipe-feed">
    {% for recipe in recipes %}
        <div class="recipe-card">
            <!-- Informa√ß√µes do Autor -->
            <div class="author-info">
                {% if recipe.author.profile.profile_picture %}
                    <img src="{{ recipe.author.profile.profile_picture.url }}" alt="Foto de Perfil" class="profile-picture-small">
                {% else %}
                    <div class="default-profile-picture-small">üì∑</div>
                {% endif %}
                <a href="{% url 'profile' recipe.author.username %}" class="author-name">{{ recipe.author.username }}</a>
            </div>

            <!-- Imagem da Receita com Hover -->
            <a href="{% url 'recipe_detail' recipe.pk %}" class="recipe-image-container">
                {% if recipe.image %}
                    <img src="{{ recipe.image.url }}" alt="Imagem da Receita" class="recipe-image">
                {% else %}
                    <div class="no-image">Sem Imagem</div>
                {% endif %}
                <div class="recipe-hover">
                    <span>{{ recipe.title }}</span>
                </div>
            </a>

            <!-- Bot√£o de Curtir -->
            <form method="post" action="{% url 'like_recipe' recipe.pk %}" class="like-form">
                {% csrf_token %}
                <button type="submit" class="like-button">
                    {% if user in recipe.likes.all %}
                        ‚ù§Ô∏è {{ recipe.total_likes }}
                    {% else %}
                        ‚ô° {{ recipe.total_likes }}
                    {% endif %}
                </button>
            </form>
        </div>
    {% empty %}
        <p>Nenhuma receita dispon√≠vel no momento.</p>
    {% endfor %}
</div>
{% endblock %}